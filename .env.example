# ============================================================================
# Obot Environment Configuration for Dokploy Deployment
# ============================================================================

# ----------------------------------------------------------------------------
# Database Configuration
# ----------------------------------------------------------------------------
POSTGRES_USER=obot
POSTGRES_PASSWORD=change_this_strong_password
POSTGRES_DB=obot

# PostgreSQL DSN (Data Source Name) - Format: postgres://user:password@host:port/database
# For this docker-compose setup, use the internal service name 'postgres'
OBOT_SERVER_DSN=postgres://obot:change_this_strong_password@postgres:5432/obot

# ----------------------------------------------------------------------------
# Application Configuration
# ----------------------------------------------------------------------------
# The hostname of your Obot instance, including protocol (required)
OBOT_SERVER_HOSTNAME=https://your-domain.com

# Enable authentication for Obot (recommended for production)
OBOT_SERVER_ENABLE_AUTHENTICATION=true

# Bootstrap token for initial setup (will be auto-generated if not set)
# You can generate one with: openssl rand -base64 32
OBOT_BOOTSTRAP_TOKEN=

# Comma-separated list of email addresses with Owner role
OBOT_SERVER_AUTH_OWNER_EMAILS=admin@your-domain.com

# Comma-separated list of email addresses with Admin role
OBOT_SERVER_AUTH_ADMIN_EMAILS=admin@your-domain.com

# Enable MCP registry API authentication
OBOT_SERVER_ENABLE_REGISTRY_AUTH=true

# ----------------------------------------------------------------------------
# AI Model Configuration
# ----------------------------------------------------------------------------
# OpenAI API Key (required for default models)
OPENAI_API_KEY=your-openai-api-key-here

# Anthropic API Key (optional, for Claude models)
ANTHROPIC_API_KEY=

# ----------------------------------------------------------------------------
# MCP Server Configuration
# ----------------------------------------------------------------------------
# Runtime backend for MCP servers: 'docker' or 'kubernetes'
OBOT_SERVER_MCPRUNTIME_BACKEND=docker

# Base image for deploying MCP servers in containers
OBOT_SERVER_MCPBASE_IMAGE=ghcr.io/obot-platform/mcp-images/phat:main

# Base image for MCP remote shim servers
OBOT_SERVER_MCPREMOTE_SHIM_BASE_IMAGE=ghcr.io/nanobot-ai/nanobot:v0.0.47

# Base image for MCP HTTP webhook servers
OBOT_SERVER_MCPHTTPWEBHOOK_BASE_IMAGE=ghcr.io/obot-platform/mcp-images/http-webhook-mcp-converter:main

# Disallow MCP servers that try to connect to localhost (default: false)
OBOT_SERVER_DISALLOW_LOCALHOST_MCP=false

# Cluster domain for MCP services (only for kubernetes runtime)
OBOT_SERVER_MCPCLUSTER_DOMAIN=

# ----------------------------------------------------------------------------
# Encryption Configuration
# ----------------------------------------------------------------------------
# Encryption provider: 'aws', 'gcp', 'azure', or 'custom'
# Leave empty for default encryption or set to 'custom' for key-based encryption
OBOT_SERVER_ENCRYPTION_PROVIDER=custom

# Encryption key (only used when provider is 'custom')
# Generate with: openssl rand -base64 32
OBOT_SERVER_ENCRYPTION_KEY=your-encryption-key-here

# Encryption config file path (only used when provider is 'custom')
OBOT_SERVER_ENCRYPTION_CONFIG_FILE=

# ----------------------------------------------------------------------------
# AWS Configuration (if using AWS KMS for encryption)
# ----------------------------------------------------------------------------
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION=

# ----------------------------------------------------------------------------
# Google Cloud Configuration (if using GCP KMS for encryption)
# ----------------------------------------------------------------------------
OBOT_GCP_KMS_KEY_URI=

# ----------------------------------------------------------------------------
# GitHub Configuration
# ----------------------------------------------------------------------------
# GitHub Personal Access Token (optional, to avoid rate limiting)
GITHUB_AUTH_TOKEN=

# ----------------------------------------------------------------------------
# MCP Catalog Configuration
# ----------------------------------------------------------------------------
# Default MCP catalog path
OBOT_SERVER_DEFAULT_MCPCATALOG_PATH=https://github.com/obot-platform/mcp-catalog

# ----------------------------------------------------------------------------
# Data Retention
# ----------------------------------------------------------------------------
# Retention policy in hours (0 = disable, default: 2160 = 90 days)
OBOT_SERVER_RETENTION_POLICY_HOURS=2160

# ----------------------------------------------------------------------------
# Audit Logs Configuration
# ----------------------------------------------------------------------------
# Audit logs storage mode: 'off', 'disk', or 's3'
OBOT_SERVER_AUDIT_LOGS_MODE=off

# S3 bucket for audit logs (only when mode is 's3')
OBOT_SERVER_AUDIT_LOGS_STORE_S3BUCKET=

# S3 endpoint for audit logs (only when mode is 's3' and not using AWS S3)
OBOT_SERVER_AUDIT_LOGS_STORE_S3ENDPOINT=

# Compress audit log files (default: true)
OBOT_SERVER_AUDIT_LOGS_COMPRESS_FILE=true

# Use path style for S3 (default: false)
OBOT_SERVER_AUDIT_LOGS_USE_PATH_STYLE=false

# MCP audit log persist interval in seconds (default: 5)
OBOT_SERVER_MCPAUDIT_LOG_PERSIST_INTERVAL_SECONDS=5

# MCP audit log persist batch size (default: 1000)
OBOT_SERVER_MCPAUDIT_LOGS_PERSIST_BATCH_SIZE=1000

# ----------------------------------------------------------------------------
# Advanced Configuration
# ----------------------------------------------------------------------------
# Number of concurrent threads in the Obot controller
NAH_THREADINESS=10000

# Number of workers for knowledge processing
OBOT_SERVER_KNOWLEDGE_FILE_WORKERS=5

# Number of database connections for kinm
KINM_DB_CONNECTIONS=5

# Disable Obot server update check (default: false)
OBOT_SERVER_DISABLE_UPDATE_CHECK=false

# ----------------------------------------------------------------------------
# OpenTelemetry Configuration (Optional)
# ----------------------------------------------------------------------------
# Base export endpoint for OpenTelemetry
OBOT_SERVER_OTEL_BASE_EXPORT_ENDPOINT=

# Sampling probability for OpenTelemetry (0.0 to 1.0)
OBOT_SERVER_OTEL_SAMPLE_PROB=

# Bearer token for OpenTelemetry authentication
OBOT_SERVER_OTEL_BEARER_TOKEN=

# ----------------------------------------------------------------------------
# Volume Paths (for Docker Compose volume configuration)
# ----------------------------------------------------------------------------
# Path for Obot data storage (ensure this directory exists on your host)
OBOT_DATA_PATH=/opt/obot/data

# Path for PostgreSQL data storage (ensure this directory exists on your host)
POSTGRES_DATA_PATH=/opt/obot/postgres
